import{c as $,a as c,h,g as H,i as K,e as Q,l as E,r as q,w as L,o as G,p as J,b as X,f as Y,n as Z,j as ee,k as te,m as k,q as oe,u as ne,s as W,t as _,v as x,x as le,y as ae,z as b,A as M,B as P,F as N,C as j,D as re}from"./index-BwzuUoxJ.js";import{h as I,a as ie,b as se}from"./render-C8JR9mId.js";import{Q as B}from"./QBtn-CSiTUp6H.js";import{s as ue,g as ce,a as de,b as fe,c as O,Q as ve,d as he}from"./QTooltip-BY_qgvP9.js";import{Q as U}from"./QResizeObserver-BmrxK0UL.js";import{u as ge}from"./use-quasar-B2-IQgE4.js";import"./focus-manager-BJWzFvJg.js";const me=$({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:d}){const l=c(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>h("div",{class:l.value},I(d.default))}}),pe=$({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:d}){const l=c(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>h("div",{class:l.value,role:"toolbar"},I(d.default))}}),ye=$({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:d,emit:l}){const{proxy:{$q:o}}=H(),n=K(E,Q);if(n===Q)return console.error("QHeader needs to be child of QLayout"),Q;const i=q(parseInt(e.heightHint,10)),u=q(!0),g=c(()=>e.reveal===!0||n.view.value.indexOf("H")!==-1||o.platform.is.ios&&n.isContainer.value===!0),f=c(()=>{if(e.modelValue!==!0)return 0;if(g.value===!0)return u.value===!0?i.value:0;const t=i.value-n.scroll.value.position;return t>0?t:0}),r=c(()=>e.modelValue!==!0||g.value===!0&&u.value!==!0),w=c(()=>e.modelValue===!0&&r.value===!0&&e.reveal===!0),S=c(()=>"q-header q-layout__section--marginal "+(g.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(r.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),z=c(()=>{const t=n.rows.value.top,m={};return t[0]==="l"&&n.left.space===!0&&(m[o.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),t[2]==="r"&&n.right.space===!0&&(m[o.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),m});function s(t,m){n.update("header",t,m)}function p(t,m){t.value!==m&&(t.value=m)}function R({height:t}){p(i,t),s("size",t)}function V(t){w.value===!0&&p(u,!0),l("focusin",t)}L(()=>e.modelValue,t=>{s("space",t),p(u,!0),n.animate()}),L(f,t=>{s("offset",t)}),L(()=>e.reveal,t=>{t===!1&&p(u,e.modelValue)}),L(u,t=>{n.animate(),l("reveal",t)}),L(n.scroll,t=>{e.reveal===!0&&p(u,t.direction==="up"||t.position<=e.revealOffset||t.position-t.inflectionPoint<100)});const C={};return n.instances.header=C,e.modelValue===!0&&s("size",i.value),s("space",e.modelValue),s("offset",f.value),G(()=>{n.instances.header===C&&(n.instances.header=void 0,s("size",0),s("offset",0),s("space",!1))}),()=>{const t=ie(d.default,[]);return e.elevated===!0&&t.push(h("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(h(U,{debounce:0,onResize:R})),h("header",{class:S.value,style:z.value,onFocusin:V},t)}}}),be=$({name:"QPageContainer",setup(e,{slots:d}){const{proxy:{$q:l}}=H(),o=K(E,Q);if(o===Q)return console.error("QPageContainer needs to be child of QLayout"),Q;J(X,!0);const n=c(()=>{const i={};return o.header.space===!0&&(i.paddingTop=`${o.header.size}px`),o.right.space===!0&&(i[`padding${l.lang.rtl===!0?"Left":"Right"}`]=`${o.right.size}px`),o.footer.space===!0&&(i.paddingBottom=`${o.footer.size}px`),o.left.space===!0&&(i[`padding${l.lang.rtl===!0?"Right":"Left"}`]=`${o.left.size}px`),i});return()=>h("div",{class:"q-page-container",style:n.value},I(d.default))}}),{passive:D}=ee,we=["both","horizontal","vertical"],Se=$({name:"QScrollObserver",props:{axis:{type:String,validator:e=>we.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:ue},emits:["scroll"],setup(e,{emit:d}){const l={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,n,i;L(()=>e.scrollTarget,()=>{f(),g()});function u(){o?.();const S=Math.max(0,de(n)),z=fe(n),s={top:S-l.position.top,left:z-l.position.left};if(e.axis==="vertical"&&s.top===0||e.axis==="horizontal"&&s.left===0)return;const p=Math.abs(s.top)>=Math.abs(s.left)?s.top<0?"up":"down":s.left<0?"left":"right";l.position={top:S,left:z},l.directionChanged=l.direction!==p,l.delta=s,l.directionChanged===!0&&(l.direction=p,l.inflectionPoint=l.position),d("scroll",{...l})}function g(){n=ce(i,e.scrollTarget),n.addEventListener("scroll",r,D),r(!0)}function f(){n!==void 0&&(n.removeEventListener("scroll",r,D),n=void 0)}function r(S){if(S===!0||e.debounce===0||e.debounce==="0")u();else if(o===null){const[z,s]=e.debounce?[setTimeout(u,e.debounce),clearTimeout]:[requestAnimationFrame(u),cancelAnimationFrame];o=()=>{s(z),o=null}}}const{proxy:w}=H();return L(()=>w.$q.lang.rtl,u),Y(()=>{i=w.$el.parentNode,g()}),G(()=>{o?.(),f()}),Object.assign(w,{trigger:r,getPosition:()=>l}),Z}}),xe=$({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:d,emit:l}){const{proxy:{$q:o}}=H(),n=q(null),i=q(o.screen.height),u=q(e.container===!0?0:o.screen.width),g=q({position:0,direction:"down",inflectionPoint:0}),f=q(0),r=q(te.value===!0?0:O()),w=c(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),S=c(()=>e.container===!1?{minHeight:o.screen.height+"px"}:null),z=c(()=>r.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${r.value}px`}:null),s=c(()=>r.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${r.value}px`,width:`calc(100% + ${r.value}px)`}:null);function p(a){if(e.container===!0||document.qScrollPrevented!==!0){const v={position:a.position.top,direction:a.direction,directionChanged:a.directionChanged,inflectionPoint:a.inflectionPoint.top,delta:a.delta.top};g.value=v,e.onScroll!==void 0&&l("scroll",v)}}function R(a){const{height:v,width:T}=a;let y=!1;i.value!==v&&(y=!0,i.value=v,e.onScrollHeight!==void 0&&l("scrollHeight",v),C()),u.value!==T&&(y=!0,u.value=T),y===!0&&e.onResize!==void 0&&l("resize",a)}function V({height:a}){f.value!==a&&(f.value=a,C())}function C(){if(e.container===!0){const a=i.value>f.value?O():0;r.value!==a&&(r.value=a)}}let t=null;const m={instances:{},view:c(()=>e.view),isContainer:c(()=>e.container),rootRef:n,height:i,containerHeight:f,scrollbarWidth:r,totalWidth:c(()=>u.value+r.value),rows:c(()=>{const a=e.view.toLowerCase().split(" ");return{top:a[0].split(""),middle:a[1].split(""),bottom:a[2].split("")}}),header:k({size:0,offset:0,space:!1}),right:k({size:300,offset:0,space:!1}),footer:k({size:0,offset:0,space:!1}),left:k({size:300,offset:0,space:!1}),scroll:g,animate(){t!==null?clearTimeout(t):document.body.classList.add("q-body--layout-animate"),t=setTimeout(()=>{t=null,document.body.classList.remove("q-body--layout-animate")},155)},update(a,v,T){m[a][v]=T}};if(J(E,m),O()>0){let a=function(){y=null,F.classList.remove("hide-scrollbar")},v=function(){if(y===null){if(F.scrollHeight>o.screen.height)return;F.classList.add("hide-scrollbar")}else clearTimeout(y);y=setTimeout(a,300)},T=function(A){y!==null&&A==="remove"&&(clearTimeout(y),a()),window[`${A}EventListener`]("resize",v)},y=null;const F=document.body;L(()=>e.container!==!0?"add":"remove",T),e.container!==!0&&T("add"),oe(()=>{T("remove")})}return()=>{const a=se(d.default,[h(Se,{onScroll:p}),h(U,{onResize:R})]),v=h("div",{class:w.value,style:S.value,ref:e.container===!0?void 0:n,tabindex:-1},a);return e.container===!0?h("div",{class:"q-layout-container overflow-hidden",ref:n},[h(U,{onResize:V}),h("div",{class:"absolute-full",style:z.value},[h("div",{class:"scroll",style:s.value},[v])])]):v}}}),ze=["src","alt"],Pe={__name:"MainLayout",setup(e){const d=le(),l=ge(),o=ne(),n=c(()=>!!o.user),i=c(()=>o.user?.displayName||"User"),u=c(()=>o.user?.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(i.value)}&background=random`),g=async()=>{try{await o.logout(),d.push("/login"),l.notify({type:"positive",message:"Logged out successfully"})}catch{l.notify({type:"negative",message:"Failed to logout"})}};return(f,r)=>{const w=ae("router-view");return _(),W(xe,{view:"lHh Lpr lFf"},{default:x(()=>[b(ye,{elevated:"",class:"bg-white text-grey-8"},{default:x(()=>[b(pe,null,{default:x(()=>[b(me,null,{default:x(()=>[P("div",{class:"row items-center no-wrap",style:{cursor:"pointer"},onClick:r[0]||(r[0]=S=>f.$router.push("/"))},r[1]||(r[1]=[P("svg",{width:"120",height:"32",viewBox:"0 0 150 40",class:"q-mr-sm"},[P("text",{x:"5",y:"28",style:{"font-family":"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif","font-size":"28px","font-weight":"bold",fill:"#2c3e50"}},"MnMoo"),P("path",{d:"M115 20 Q 120 10, 125 20 T 135 20",style:{fill:"none",stroke:"var(--q-primary)","stroke-width":"2","stroke-linecap":"round"}})],-1)]))]),_:1}),n.value?(_(),M(N,{key:1},[b(B,{flat:"",dense:"",icon:u.value?void 0:"person",to:"/dashboard"},{default:x(()=>[u.value?(_(),W(ve,{key:0,size:"26px"},{default:x(()=>[P("img",{src:u.value,alt:i.value},null,8,ze)]),_:1})):(_(),M(N,{key:1},[j(re(i.value),1)],64))]),_:1},8,["icon"]),b(B,{flat:"",dense:"",icon:"logout",onClick:g},{default:x(()=>[b(he,null,{default:x(()=>r[2]||(r[2]=[j("Logout")])),_:1})]),_:1})],64)):(_(),M(N,{key:0},[b(B,{flat:"",dense:"",label:"Log In",to:"/login"}),b(B,{unelevated:"",dense:"",color:"primary",label:"Sign Up",to:"/signup",class:"q-ml-sm"})],64))]),_:1})]),_:1}),b(be,null,{default:x(()=>[b(w)]),_:1})]),_:1})}}};export{Pe as default};
