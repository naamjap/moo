import{Q as V}from"./QBanner-DT5U7ZlN.js";import{v as E,r as n,t as q,x as p,y as o,z as y,E as t,D as u,O as w,F as x,N as b,C as m,H as d,I as _,Q as h,M as Q}from"./index-BaVYnzeZ.js";import{Q as T}from"./QPage-CFXxS5AB.js";import{u as B}from"./use-quasar-C0v5808h.js";import"./use-dark-DkeVdRfg.js";const C={class:"text-center q-pa-md"},N={key:1,class:"text-caption text-grey-7 q-mt-sm"},A={class:"text-positive"},R={__name:"VerifyEmail",setup(I){const f=E(),g=B(),c=n(!1),r=n(""),l=n(0),s=n(!1);let i=null;const v=(e=60)=>{l.value=e,s.value=!0,i=setInterval(()=>{l.value--,l.value<=0&&(clearInterval(i),s.value=!1)},1e3)},k=async()=>{if(s.value)return;c.value=!0,r.value="";const e=await f.resendVerificationEmail();e.success?(g.notify({type:"positive",message:"Verification email sent! Please check your inbox."}),v()):(r.value=e.error,(e.reason==="TOO_MANY_ATTEMPTS_TRY_LATER"||e.reason==="auth/too-many-requests")&&v(120)),c.value=!1};return q(()=>{i&&clearInterval(i)}),(e,a)=>(o(),p(T,{class:"flex flex-center"},{default:y(()=>[t("div",C,[w(f).isEmailVerified?(o(),u(x,{key:1},[t("div",A,[m(Q,{name:"check_circle",size:"4rem"}),a[2]||(a[2]=t("h2",{class:"text-h4 q-mb-md"},"Email Verified!",-1))]),m(h,{color:"primary",label:"Continue to Dashboard",to:"/dashboard"})],64)):(o(),u(x,{key:0},[a[0]||(a[0]=t("h2",{class:"text-h4 q-mb-md"},"Verify Your Email",-1)),a[1]||(a[1]=t("p",{class:"text-body1 q-mb-lg"},[d(" Please check your email for a verification link. "),t("br"),d("Didn't receive the email? ")],-1)),r.value?(o(),p(V,{key:0,class:"bg-negative text-white q-mb-md"},{default:y(()=>[d(_(r.value),1)]),_:1})):b("",!0),m(h,{color:"primary",label:"Resend Verification Email",loading:c.value,disable:s.value,onClick:k},null,8,["loading","disable"]),s.value?(o(),u("p",N," Please wait "+_(l.value)+" seconds before requesting another email ",1)):b("",!0)],64))])]),_:1}))}};export{R as default};
